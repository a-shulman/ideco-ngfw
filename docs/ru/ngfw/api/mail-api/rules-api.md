# Правила

## Переадресация

{#top}

{% cut "Получение правил переадресации" %}

`GET /mail/rules/alias`

**Ответ на успешный запрос:**

```json5
[
  {
    "id": "string",
    "recipient": "string",
    "map": [
      "string",
      ...
    ]
  },
  ...
]
```

* `id` - идентификатор правила;
* `recipient` - получатель. Не может быть пустой строкой, максимальная длина - 255 символов;
* `map` - массив адресов для пересылки. Если не настроен - пустой массив. Каждый элемент массива не может быть пустой строкой, максимальная длина - 255 символов.

{% endcut %}

{#top}

{% cut "Добавление правил переадресации" %}

`POST /mail/rules/alias`

**Json-тело запроса:**

```json5
{

  "recipient": "string",
  "map": [
    "string"
  ]
}
```

* `id` - идентификатор правила;
* `recipient` - получатель. Не может быть пустой строкой, максимальная длина - 255 символов;
* `map` - массив адресов для пересылки. Если не настроен - пустой массив. Каждый элемент массива не может быть пустой строкой, максимальная длина - 255 символов.

**Ответ на успешный запрос:**

```json5
{

  "id": "string"
}
```

* `id` - идентификатор созданного правила.

{% endcut %}

{#top}

{% cut "Изменение правил переадресации" %}

`PUT /mail/rules/alias/<id правила>`

**Json-тело запроса:**

```json5
{

  "recipient": "string",
  "map": [
    "string",
    ...
  ]
}
```

* `id` - идентификатор правила;
* `recipient` - получатель. Не может быть пустой строкой, максимальная длина - 255 символов;
* `map` - массив адресов для пересылки. Если не настроен - пустой массив. Каждый элемент массива не может быть пустой строкой, максимальная длина - 255 символов.

**Ответ на успешный запрос:** 200 ОК

{% endcut %}

{#top}

{% cut "Удаление правил переадресации" %}

`DELETE /mail/rules/alias/<id правила>`

**Ответ на успешный запрос:** 200 ОК

{% endcut %}

## Разрешенные адреса

{#top}

{% cut "Получение списка" %}

`GET /mail/rules/whitelist`

Ответ:

```json5
[
  {
    "id": "string",
    "address": "string",
    "comment": "string",
    "type": "integer"
  },
  ...
]
```

* `id` - идентификатор правила;
* `address` - домен/IP-адрес/адрес почты, который будет исключен из проверок на спам. Не может быть пустой строкой, максимальная длина - 255 символов;
* `comment` - комментарий. Может быть пустой строкой, максимальная длина - 255 символов;
* `type` - тип поля `address` (1 - домен, 2 - IP-адрес, 3 - адрес почты).

{% endcut %}

{#top}

{% cut "Создание разрешенного адреса" %}

`POST /mail/rules/whitelist`

**Json-тело запроса:**

```json5
{

  "address": "string",
  "comment": "string"
}
```

* `address` - домен/IP-адрес/адрес почты, который будет исключен из проверок на спам. Не может быть пустой строкой, максимальная длина - 255 символов;
* `comment` - комментарий. Может быть пустой строкой, максимальная длина - 255 символов.

**Ответ на успешный запрос:**

```json5
{

  "id": "string"
}
```

* `id` - идентификатор созданного правила.

{% endcut %}

{#top}

{% cut "Изменение разрешенного адреса" %}

`PUT /mail/rules/whitelist/<id правила>`

**Json-тело запроса:**

```json5
{

  "address": "string",
  "comment": "string"
}
```

* `address` - домен/IP-адрес/адрес почты, который будет исключен из проверок на спам. Не может быть пустой строкой, максимальная длина - 255 символов;
* `comment` - комментарий. Может быть пустой строкой, максимальная длина - 255 символов.

**Ответ на успешный запрос:** 200 ОК

{% endcut %}

{#top}

{% cut "Удаление разрешенного адреса" %}

`DELETE /mail/rules/whitelist/<id правила>`

**Ответ на успешный запрос:** 200 ОК

{% endcut %}

## Запрещенные адреса

{#top}

{% cut "Получение списка" %}

`GET /mail/rules/blacklist`

**Ответ на успешный запрос:**

```json5
[
  {
    "id": "string",
    "address": "string",
    "comment": "string",
    "type": "integer"
  },
  ...
]
```

* `id` - идентификатор правила;
* `address` - домен/IP-адрес/адрес почты, который будет отфильтрован. Не может быть пустой строкой, максимальная длина - 255 символов;
* `comment` - комментарий. Может быть пустой строкой, максимальная длина - 255 символов;
* `type` - тип поля `address` (1 - домен, 2 - IP-адрес, 3 - адрес почты).

{% endcut %}

{#top}

{% cut "Создание запрещенного адреса" %}

`POST /mail/rules/blacklist`

**Json-тело запроса:**

```json5
{

  "address": "string",
  "comment": "string"
}
```

* `address` - домен/IP-адрес/адрес почты, который будет отфильтрован. Не может быть пустой строкой, максимальная длина - 255 символов;
* `comment` - комментарий. Может быть пустой строкой, максимальная длина - 255 символов.

**Ответ на успешный запрос:**

```json5
{

  "id": "string"
}
```

- `id` - идентификатор созданного правила.

{% endcut %}

{#top}

{% cut "Изменение запрещенного адреса" %}

`PUT /mail/rules/blacklist/<id правила>`

**Json-тело запроса:**

```json5
{

  "address": "string",
  "comment": "string"
}
```

* `address` - домен/IP-адрес/адрес почты, который будет отфильтрован. Не может быть пустой строкой, максимальная длина - 255 символов;
* `comment` - комментарий. Может быть пустой строкой, максимальная длина - 255 символов.

**Ответ на успешный запрос:** 200 ОК

{% endcut %}

{#top}

{% cut "Удаление запрещенного адреса" %}

`DELETE /mail/rules/blacklist/<id правила>`

**Ответ на успешный запрос:** 200 ОК

{% endcut %}

